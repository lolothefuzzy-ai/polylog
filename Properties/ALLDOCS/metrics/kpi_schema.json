{\n  "version": "1.0",\n  "schema_date": "2025-10-30",\n  "description": "Stability KPI definitions and thresholds for Polylog engine",\n  "kpis": {\n    "crash_rate": {\n      "name": "Crash Rate\",\n      "unit": "crashes per 1,000,000 sessions",\n      "threshold": 1.0,\n      "slo": ">99.9%\",\n      "collection": "async telemetry from production",\n      "calculation": "(total_crashes / total_sessions) * 1e6",\n      "alert_level": "critical",\n      "definition": "User-facing application crash reported to telemetry backend. Excludes debug asserts and customer code crashes.\"\n    },\n    \"device_lost_frequency\": {\n      \"name\": \"Device Lost Events\",\n      \"unit\": \"events per hour\",\n      \"threshold\": 0.5,\n      \"slo\": \"<0.5 per hour per platform\",\n      \"collection\": \"driver instrumentation + synthetic chaos tests\",\n      \"calculation\": \"(total_device_lost_events / total_runtime_hours)\",\n      \"alert_level\": \"warning\",\n      \"definition\": \"GPU device reset or critical error requiring recovery. Synthetic tests inject device-lost signals to measure recovery time (<500ms target).\"\n    },\n    \"frame_stall_spikes\": {\n      \"name\": \"Frame Time Spikes\",\n      \"unit\": \"milliseconds over budget per hour\",\n      \"threshold\": 100,\n      \"slo\": \"<100ms total per hour\",\n      \"collection\": \"frame timer (per-frame), aggregated hourly\",\n      \"calculation\": \"sum(max(frame_time_ms - budget_ms, 0)) for all frames in hour\",\n      \"alert_level\": \"warning\",\n      \"definition\": \"Cumulative frame time overages. Budget is 16.67ms @ 60Hz. Any frame >50ms counts as a spike.\"\n    },\n    \"nondeterminism_rate\": {\n      \"name\": \"Nondeterminism Divergences\",\n      \"unit\": \"divergences per 1,000,000 frames\",\n      \"threshold\": 0,\n      \"slo\": \"0 in determinism mode\",\n      \"collection\": \"record/replay test suite, per-frame hash comparison\",\n      \"calculation\": \"(frames_with_hash_mismatch / total_frames) * 1e6\",\n      \"alert_level\": \"critical\",\n      \"definition\": \"Frames where identical inputs produce different outputs in determinism mode. Records physics state, culling, and GPU dispatch order hashes.\"\n    },\n    \"memory_fragmentation\": {\n      \"name\": \"Memory Pool Fragmentation\",\n      \"unit\": \"percent wasted space in pools\",\n      \"threshold\": 25,\n      \"slo\": \"<20%\",\n      \"collection\": \"allocator telemetry, runtime instrumentation\",\n      \"calculation\": \"(wasted_bytes / total_pool_bytes) * 100 per pool; aggregate max\",\n      \"alert_level\": \"warning\",\n      \"definition\": \"Wasted space due to fragmentation in buddy/slab allocators. Measured per pool (render targets, textures, meshes, etc.).\"\n    },\n    \"asset_import_failure_rate\": {\n      \"name\": \"Asset Import Failures\",\n      \"unit\": \"failures per 1,000 imports\",\n      \"threshold\": 1.0,\n      \"slo\": \"<1 per 1,000 imports\",\n      \"collection\": \"asset pipeline logs, import telemetry\",\n      \"calculation\": \"(failed_imports / total_imports) * 1000\",\n      \"alert_level\": \"warning\",\n      \"definition\": \"Assets (meshes, textures, scenes) that fail validation or parsing. Includes timeouts (>30s) and schema violations.\"\n    },\n    \"nan_inf_incidents\": {\n      \"name\": \"NaN/Inf Incidents\",\n      \"unit\": \"incidents per 1,000,000 frames\",\n      \"threshold\": 0,\n      \"slo\": \"0 in any mode\",\n      \"collection\": \"debug sanitizers, soak test monitoring\",\n      \"calculation\": \"(frames_with_nan_or_inf / total_frames) * 1e6\",\n      \"alert_level\": \"critical\",\n      \"definition\": \"Any floating-point NaN or Inf detected in physics, transforms, or GPU state. 24h soak must have zero incidents.\"\n    },\n    \"handle_leak_rate\": {\n      \"name\": \"GPU Handle Leaks\",\n      \"unit\": \"leaked handles per 1,000 frames\",\n      \"threshold\": 0,\n      \"slo\": \"0 over 24h soak\",\n      \"collection\": \"device-lost chaos test, resource tracking\",\n      \"calculation\": \"(leaked_handles / total_frames) * 1000\",\n      \"alert_level\": \"critical\",\n      \"definition\": \"GPU handles (buffers, textures, sampler states) not freed after device-lost recovery or normal shutdown.\"\n    },\n    \"perf_regression\": {\n      \"name\": \"Frame Time Regression\",\n      \"unit\": \"percent slower vs. baseline\",\n      \"threshold\": 5.0,\n      \"slo\": \"<5% regression per build\",\n      \"collection\": \"CI perf gates, benchmark suite\",\n      \"calculation\": \"((current_frame_time - baseline_frame_time) / baseline_frame_time) * 100\",\n      \"alert_level\": \"warning\",\n      \"definition\": \"Any commit that increases median frame time by >5% compared to previous stable build. Measured in determinism mode on fixed scene.\"\n    },\n    \"golden_image_regression\": {\n      \"name\": \"Golden Image Regression\",\n      \"unit\": \"SSIM score (0-1)\",\n      \"threshold\": 0.95,\n      \"slo\": \">0.95 across all platforms\",\n      \"collection\": \"golden image test suite, per-platform CI jobs\",\n      \"calculation\": \"structural_similarity(rendered, baseline) with perceptual weighting\",\n      \"alert_level\": \"warning\",\n      \"definition\": \"Visual regression detected by SSIM comparison between rendered image and golden baseline. Per-GPU vendor (NVIDIA, AMD, Intel), per-driver version.\"\n    }\n  },\n  \"platforms\": [\n    \"Windows\",\n    \"Linux\",\n    \"macOS\",\n    \"Console (TBD)\"\n  ],\n  \"reporting_cadence\": {\n    \"real_time\": [\"crash_rate\", \"nan_inf_incidents\", \"handle_leak_rate\", \"nondeterminism_rate\"],\n    \"hourly\": [\"frame_stall_spikes\", \"perf_regression\"],\n    \"daily\": [\"device_lost_frequency\", \"asset_import_failure_rate\"],\n    \"weekly\": [\"memory_fragmentation\", \"golden_image_regression\"]\n  },\n  \"alert_escalation\": {\n    \"critical\": {\n      \"escalate_after\": \"5 minutes\",\n      \"recipients\": [\"on-call-eng\", \"stability-lead\"],\n      \"action\": \"block-release, file-issue\"\n    },\n    \"warning\": {\n      \"escalate_after\": \"1 hour\",\n      \"recipients\": [\"stability-team\"],\n      \"action\": \"investigate, update-dashboard\"\n    }\n  }\n}\n